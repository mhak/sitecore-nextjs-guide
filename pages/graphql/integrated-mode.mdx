---
title: Integrated mode
description: Learn how to build a Sitecore Next.js component using GraphQL integrated mode
---
# Build a Sitecore Next.js component using GraphQL integrated mode

In this guide, we will learn how to build a Sitecore Next.js component using GraphQL in integrated mode.
## Layout Service
``` json showLineNumbers {13-14,17-18,22-23}
"sitecore": {
  "route": {
    ...
    "placeholders": {
      "jss-main": [...],
      "jss-header": [
          {
            "uid": "420108ad-deda-4944-a09d-63fdb9811582",
            "componentName": "MainNavigationIntegrated",
            "dataSource": "{2CD2AB0A-034B-474A-891B-87F8B883C0A8}",
            "params": {},
            "fields": {
              "data": {
                "datasource": {
                  "id": "2CD2AB0A034B474A891B87F8B883C0A8",
                  "name": "Header",
                  "children": {
                    "results": [
                      {
                        "id": "9F7596596F4C4EB48DF69F178260AB69",
                        "name": "Documentation",
                        "navigationLink": {
                          "jsonValue": {
                            "value": {
                              "href": "https://jss.sitecore.com",
                              "text": "Documentation",
                              "linktype": "external",
                              "url": "https://jss.sitecore.com",
                              "anchor": "",
                              "target": "_blank"
                            }
                          }
                        }
                      },
  ...
```
Take a note of the data structure returned by our GraphQL query in `Layout Service`. We will need to map these on our component.

## Navigation Component
``` jsx filename="src\rendering\src\components\Feature\Navigation\MainNavigationIntegrated.tsx" showLineNumbers {1, 13-14, 20-21, 26-27, 33-34, 44-62}
import { Link, LinkField, withDatasourceCheck } from '@sitecore-jss/sitecore-jss-nextjs'
import { getPublicUrl } from '@sitecore-jss/sitecore-jss-nextjs';
import { ComponentProps } from 'lib/component-props';

// Prefix public assets with a public URL to enable compatibility with Sitecore Experience Editor.
// If you're not supporting the Experience Editor, you can remove this.
const publicUrl = getPublicUrl();

// These types maps to the Layout Service which has the GraphQL data
type NavigationItem = {
  id: string,
  name: string,
  navigationLink: {
    jsonValue:  LinkField
  } 
}
type DataSource = {
    id: string,
    name: string,
    children: {
      results: Array<NavigationItem>
    }
}
type MainNavigationProps = ComponentProps & {
  fields: {
    data: {
      datasource: DataSource
    }
  }
}

const MainNavigationIntegrated = (props: MainNavigationProps): JSX.Element => {
  // loop through the datasource children and grab all the jsonValues
  let navigationItems = props.fields.data.datasource.children.results.map(i => i.navigationLink.jsonValue);

  return (
    <div className="d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom">
      <h5 className="my-0 mr-md-auto font-weight-normal">
        <a className="text-dark" href="/">
          <img src={`${publicUrl}/sc_logo.svg`} alt="Sitecore" />
        </a>
      </h5>
      <nav className="my-2 my-md-0 mr-md-3">
        {/* 
          The Link component expects an object on the field property with the structure
              "value": {
                "href": "...",
                "text": "...",
                "linktype": "...",
                "url": "...",
                "anchor": "...",
                "target": "..."
              }
        */}
        { navigationItems && navigationItems.map((item, index) => (
            <Link
              key={index}
              field={item}
              className='p-2 text-dark'
            />
          ))
        }
      </nav>
    </div>
  );
};

export default withDatasourceCheck()<MainNavigationProps>(MainNavigationIntegrated);
```